contenu_complet = """Orchidaceae Ophrys aegirtica P.Delforge Ophrys du Gers X NT ? NE
Orchidaceae Ophrys aveyronensis Ophrys de l'Aveyron NT  NE
Orchidaceae Ophrys aymoninii Ophrys d'Aymonin X NT  NE
Orchidaceae Ophrys bertolonii Ophrys de Bertoloni NT  LC
Orchidaceae Ophrys bombyliflora Ophrys bombyx NT  LC
Orchidaceae Ophrys catalaunica Ophrys catalaunica NT  NE
Orchidaceae Ophrys vasconica Ophrys du pays Basque NT  NE
Fabaceae Ornithopus sativus Brot. Ornithope cultivé NT  LC
Orobanchaceae Orobanche alsatica Kirschl. Orobanche d'Alsace NT  NE
Orobanchaceae Orobanche artemisii-campestris Gaudin Orobanche du Picris NT  NE
Orobanchaceae Orobanche cernua Loefl. Orobanche penchée NT ? NE
Orobanchaceae Orobanche fuliginosa Orobanche X NT  NE
Orobanchaceae Orobanche sanguinea C.Presl Orobanche rouge sang NT  NE
Orobanchaceae Orobanche santolinae Loscos & J.Pardo Orobanche de la Santoline NT ? NE
Fabaceae Oxytropis xerophila Gutermann Oxytropis velouté NT  NE
Poaceae Patzkea durandoi G.H.Loos NT  NE
Orobanchaceae Pedicularis palustris Pédiculaire des marais NT  NE
Orobanchaceae Phelipanche arenaria Pomel Orobanche des sables NT  NE
Verbenaceae Phyla nodiflora Greene Phyla à fleurs nodales NT  NE
Ericaceae Phyllodoce caerulea Bab. Andromède bleue NT  NE
Campanulaceae Phyteuma villarsii Rich.Schulz Raiponce de Villars NT  NE
Poaceae Piptatherum virescens Boiss. Millet verdâtre NT  NE
Caryophyllaceae Polycarpon polycarpoides Zodda Polycarpon Faux-Péplis NT  NE
Polygalaceae Polygala exilis DC. Polygale grêle NT ? NE
Polygonaceae Polygonum bellardii Renouée de Bellardi NT  NE
Polygonaceae Polygonum raii Bab. Renouée de Ray NT  NE
Polygonaceae Polygonum robertii Loisel. Renouée de Robert NT  NE
Dryopteridaceae Polystichum braunii Fée Polystic de Braun NT  LC
Potamogetonaceae Potamogeton acutifolius Link Potamot à feuilles aiguës NT  NT
Potamogetonaceae Potamogeton alpinus Balb. Potamot des Alpes NT  LC
Potamogetonaceae Potamogeton friesii Rupr. Potamot à feuilles mucronées NT  LC
Rosaceae Potentilla alba Potentille blanche NT  NE
Rosaceae Potentilla delphinensis Potentille du Dauphiné X NT  VU
Primulaceae Primula allionii Loisel. Primevère d'Allioni NT  NE
Primulaceae Primula matthioli J.A.Richt. Cortuse de Matthiole NT  NE
Asteraceae Pulicaria sicula Pulicaire de Sicile NT  NE
Ranunculaceae Ranunculus clethraphilus Litard. Renoncule du Monte d'Oro X NT  NE
Ranunculaceae Ranunculus nodiflorus Renoncule à fleurs nodales NT  NE
Ranunculaceae Ranunculus polyanthemoides Boreau Renoncule à segments étroits NT  NE
Orobanchaceae Rhinanthus pseudoantiquus Kunz Rhinanthe pseudo-antique X NT  NE
Poaceae Rostraria pubescens Trin. Koelérie du littoral NT  NE
Caryophyllaceae Sagina nodosa Fenzl Sagine noueuse NT  NE
Lamiaceae Salvia aethiopis Sauge d'Éthiopie NT  NE
Lamiaceae Salvia officinalis Sauge officinale NT  LC
Caryophyllaceae Saponaria lutea Saponaire jaune NT  NE
Papaveraceae Sarcocapnos enneaphylla DC. Fumeterre à neuf folioles NT  NE
Saxifragaceae Saxifraga cotyledon Saxifrage Cotylédon NT  NE
Scheuchzeriaceae Scheuchzeria palustris L. Scheuchzérie des tourbières NT  NE
Cyperaceae Schoenoplectus supinus Palla Scirpe couché NT  NE
Asteraceae Scolymus grandiflorus Desf. Scolyme à grandes fleurs NT ? NE
Asteraceae Scolymus maculatus Scolyme maculé NT ? NE
Crassulaceae Sedum amplexicaule Orpin ampléxicaule NT  NE
Crassulaceae Sedum litoreum Orpin du littoral NT  NE
Apiaceae Selinum broteri Hoffmanns. & Link Sélin de Brotero NT  NE
Asteraceae Senecio serpentinicola Jeanm. X NT  NE
Orchidaceae Serapias cordigera L. Sérapias en coeur NT ? LC
Caryophyllaceae Silene mutabilis Silène négligé NT  NE
Caryophyllaceae Silene noctiflora Silène de nuit NT  NE
Caryophyllaceae Silene succulenta Silene succulenta NT  NE
Apiaceae Sium latifolium Berle à larges feuilles NT  LC
Apiaceae Smyrnium perfoliatum Maceron perfolié NT ? NE
Primulaceae Soldanella villosa Grande Soldanelle NT  VU
Asteraceae Sonchus aquatilis Pourr. Laiteron aquatique NT  NE
Typhaceae Sparganium natans Rubanier nain NT  NT
Lamiaceae Stachys marrubiifolia Viv. Epiaire à feuilles de Marrube NT  NE
Ranunculaceae Staphisagria picta Jabbour Dauphinelle peinte NT  NE
Poaceae Stipellula parviflora Röser & H.R.Hamasha Stipe à petites fleurs NT  NE
Potamogetonaceae Stuckenia filiformis Potamot filiforme NT ? LC
Poaceae Taeniatherum caput-medusae Nevski Taéniathérum tête-de-méduse NT ? NE
Asteraceae Taraxacum ciliare Soest Pissenlit NT  NE
Asteraceae Taraxacum gallicum Soest Pissenlit de Gaule NT  NE
Asteraceae Taraxacum hollandicum Soest Pissenlit de Hollande NT  NE
Asteraceae Taraxacum madidum Kirschner & Štěpánek NT  NE
Asteraceae Taraxacum multilepis Kirschner & Štěpánek Pissenlit NT  NE
Asteraceae Taraxacum rubricatum Kirschner & Štěpánek X NT  NE
Ranunculaceae Thalictrum lucidum Pigamon méditerranéen NT  NE
Ranunculaceae Thalictrum tuberosum Pigamon tubéreux NT  NE
Santalaceae Thesium kyrnosum Hendrych Thésium de Corse X NT  NE
Thymelaeaceae Thymelaea tartonraira Passerine Tartonraire NT  NE
Tofieldiaceae Tofieldia pusilla Pers. Tofieldie boréale NT  NE
Fabaceae Trifolium angulatum Waldst. & Kit. NT ? NE
Fabaceae Trifolium retusum Trèfle tronqué NT ? NE
Typhaceae Typha minima Funck Petite massette NT  DD
Lentibulariaceae Utricularia minor Petite utriculaire NT  LC
Lentibulariaceae Utricularia ochroleuca Utriculaire jaunâtre NT ? DD
Caryophyllaceae Vaccaria hispanica Rauschert Saponaire des vaches NT  NE
Rubiaceae Valantia hispida Vaillantie hérissée NT  NE
Caprifoliaceae Valeriana celtica Nard celtique NT  NE
Caryophyllaceae Velezia rigida Vélézia raide NT  NE
Melanthiaceae Veratrum nigrum Vérâtre noir NT  NE
Plantaginaceae Veronica prostrata Véronique prostrée NT ? NE
Plantaginaceae Veronica triphyllos Véronique à feuilles trilobées NT  NE
Fabaceae Vicia cusnae Vesce du mont Cusna NT  NE
Violaceae Viola pinnata Violette à feuilles pennées NT  NE
Violaceae Viola roccabrunensis Pensée de Roquebrune X NT  NE
Apiaceae Xatardia scabra Xatardie rude NT  NE


"""
contenu_complet = contenu_complet.replace('é', 'e').replace('\u00c3\u00a9', 'e').replace('\u00e8', 'e').replace('EX', 'Ex').replace('RE', 'Re').replace('CR', 'Cr').replace('EN', 'En').replace('VU', 'Vu').replace('NT', 'Nt').replace('LC', 'Lc').replace('DD', 'Dd').replace('NA', 'Na').replace('NE', 'Ne').replace('', 'Downa').replace('', 'Uppera').replace('', 'Stilla')

categorie = 'vegetaux'
sous_categorie = 'NULL'
clrm = 'NULL'
tendance = 'NULL'

def add_X(texte):
    lignes = texte.split('\n')  # Divise le texte en lignes

    for index, ligne in enumerate(lignes, start=1486):
        mots = ligne.split()
        nouveaux_mots = [str(index)]
        count = 0

        for mot in mots:
            if mot.lower() == 'de':
                nouveaux_mots.append('_de_')
                count += 1
            elif mot.lower() == 'du':
                nouveaux_mots.append('_du_')
                count += 1
            elif mot.lower() == 'des':
                nouveaux_mots.append('_des_')
                count += 1
            elif (not mot[0].isupper() and not nouveaux_mots[-1][-1].isupper() and 
                not mot.endswith('?') and not mot.startswith("'")):
                nouveaux_mots[-1] += '_' + mot
            elif (mot[0].isupper() and nouveaux_mots[-1].endswith('_')):
                nouveaux_mots[-1] += mot
            else:
                nouveaux_mots.append("\\t" + mot)

        # nouveaux_mots.append('\\t' + tendance)
        # nouveaux_mots.append('\\t' + clrm)
        

        if len(nouveaux_mots) >= 1:
            nouveaux_mots.append('\\t' + categorie)
            nouveaux_mots.append('\\t' + sous_categorie)
            nouveaux_mots.append('\\tNULL')
            # if nouveaux_mots[(4 + int(count))] == '\\tX':
            #     nouveaux_mots.pop(4 +int(count))
            #     nouveaux_mots.append('\\tX')
            # else :
                

        lignes[index-1486] = ' '.join(nouveaux_mots)
        
    resultat = '\n'.join(lignes)
    resultat = resultat.replace('__', '_').replace(' ', '')

    return resultat

added_x = add_X(contenu_complet)
output_file = 'test.txt'


with open(output_file, 'w', encoding='utf-8') as file:
    file.write(added_x)
